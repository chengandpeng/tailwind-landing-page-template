"use client";

import { useState, useEffect } from "react";

import Link from "next/link";
import Logo from "./logo";
import Dropdown from "@/components/utils/dropdown";
import MobileMenu from "./mobile-menu";
import { useRouter } from "next/navigation";

export default function Header() {
  const [top, setTop] = useState<boolean>(true);
  const router = useRouter();

  // detect whether user has scrolled the page down by 10px
  const scrollHandler = () => {
    window.pageYOffset > 10 ? setTop(false) : setTop(true);
  };

  useEffect(() => {
    scrollHandler();
    window.addEventListener("scroll", scrollHandler);
    return () => window.removeEventListener("scroll", scrollHandler);
  }, [top]);

  return (
    <header
      className={`fixed w-full z-30 md:bg-opacity-90 transition duration-300 ease-in-out ${
        !top ? "bg-white backdrop-blur-sm shadow-lg" : ""
      }`}
    >
      <div className="max-w-6xl mx-auto px-5 sm:px-6">
        <div className="flex items-center justify-between h-16 md:h-20">
          {/* Site branding */}
          <div
            className="flex items-center shrink-0 mr-4 cursor-pointer"
            onClick={() => router.push("/")}
          >
            <Logo />
            <svg
              width="90"
              height="30"
              viewBox="0 0 130 35"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.792 4.468C16.928 4.468 16.424 3.82 16.424 2.668V1.84C16.424 0.687998 16.928 0.0399995 17.792 0.0399995C18.656 0.0399995 19.16 0.687998 19.16 1.84V2.668C19.16 3.82 18.692 4.468 17.792 4.468ZM0.944 18.364V16.456C0.944 15.304 1.592 14.656 2.744 14.656H22.616C23.768 14.656 24.416 15.304 24.416 16.456V18.364C24.416 19.516 23.768 20.164 22.616 20.164H16.928C16.496 25.384 14.408 28.48 11.312 30.568C9.008 32.152 6.056 33.124 3.86 33.556C2.672 33.772 1.952 33.088 1.952 31.864V29.704C1.952 28.588 2.528 28.012 3.608 27.796C4.472 27.616 5.516 27.328 6.488 26.896C9.296 25.672 10.736 23.728 11.096 20.164H2.744C1.592 20.164 0.944 19.516 0.944 18.364ZM1.952 9.076V7.168C1.952 6.016 2.6 5.368 3.752 5.368H21.644C22.796 5.368 23.444 6.016 23.444 7.168V9.076C23.444 10.228 22.796 10.876 21.644 10.876H3.752C2.6 10.876 1.952 10.228 1.952 9.076ZM20.708 2.668V1.84C20.708 0.687998 21.212 0.0399995 22.076 0.0399995C22.94 0.0399995 23.444 0.687998 23.444 1.84V2.668C23.444 3.82 22.976 4.468 22.076 4.468C21.212 4.468 20.708 3.82 20.708 2.668ZM47.0147 5.728C46.1507 5.728 45.6467 5.08 45.6467 3.928V1.84C45.6467 0.687998 46.1507 0.0399995 47.0147 0.0399995C47.8787 0.0399995 48.3827 0.687998 48.3827 1.84V3.928C48.3827 5.08 47.9147 5.728 47.0147 5.728ZM28.6547 31.432V29.2C28.6547 28.084 29.2307 27.436 30.3827 27.292C39.2387 26.068 44.2427 20.668 46.4387 13.36C46.7627 12.316 47.4107 11.812 48.4547 11.812H50.5427C51.8027 11.812 52.4867 12.496 52.1627 13.648C49.5347 23.944 42.2987 31.36 30.5627 33.124C29.3747 33.304 28.6547 32.656 28.6547 31.432ZM28.6547 17.932V15.88C28.6547 14.728 29.3027 14.08 30.4547 14.08H37.4027C38.5547 14.08 39.2027 14.728 39.2027 15.88V17.932C39.2027 19.084 38.5547 19.732 37.4027 19.732H30.4547C29.3027 19.732 28.6547 19.084 28.6547 17.932ZM28.6547 9.184V7.132C28.6547 5.98 29.3027 5.332 30.4547 5.332H37.4027C38.5547 5.332 39.2027 5.98 39.2027 7.132V9.184C39.2027 10.336 38.5547 10.984 37.4027 10.984H30.4547C29.3027 10.984 28.6547 10.336 28.6547 9.184ZM49.9307 3.928V1.84C49.9307 0.687998 50.4347 0.0399995 51.2987 0.0399995C52.1627 0.0399995 52.6667 0.687998 52.6667 1.84V3.928C52.6667 5.08 52.1987 5.728 51.2987 5.728C50.4347 5.728 49.9307 5.08 49.9307 3.928ZM57.4438 23.152C56.2918 23.152 55.6438 22.504 55.6438 21.352V19.3C55.6438 18.148 56.2918 17.5 57.4438 17.5H70.4758C71.6278 17.5 72.2758 18.148 72.2758 19.3V21.352C72.2758 22.504 71.6278 23.152 70.4758 23.152H57.4438ZM86.1563 34.528C84.7883 34.528 84.3203 33.7 84.8603 32.404C85.2563 31.54 85.6163 30.604 85.9043 29.668C85.3283 29.416 84.7163 29.02 83.9963 28.48C83.2043 27.904 82.9163 27.22 82.9163 26.284V24.052C82.9163 22.54 83.7083 22.216 84.8963 23.116C85.6163 23.656 86.3723 24.016 87.2723 24.268C87.6683 21.712 87.8483 18.076 87.7043 14.008C85.1123 15.988 81.5123 20.128 81.5123 24.736V28.156C81.5123 29.308 80.8643 29.956 79.7123 29.956H78.4883C77.3363 29.956 76.6883 29.308 76.6883 28.156V8.968C76.6883 7.816 77.3363 7.168 78.4883 7.168H79.7123C80.8643 7.168 81.5123 7.816 81.5123 8.968V14.548C83.2763 11.632 84.9323 9.472 87.4163 8.176L87.2003 5.908C87.0563 4.684 87.7043 4 88.8923 4H90.1163C91.2323 4 91.8803 4.576 91.9883 5.692C92.0603 6.304 92.0963 6.88 92.1323 7.42C98.0003 8.212 100.52 13.684 100.52 19.156C100.52 24.736 97.4603 29.992 91.0523 30.496C90.8363 31.324 90.4763 32.224 90.0083 33.196C89.5763 34.132 88.8923 34.528 87.8843 34.528H86.1563ZM92.0243 24.88C94.7603 24.34 95.9483 22.072 95.8763 19.048C95.8043 15.916 94.5083 13.864 92.4923 13.18C92.6363 16.744 92.6363 20.884 92.0243 24.88ZM119.52 25.276C118.476 25.276 117.792 24.772 117.468 23.656C116.928 21.82 116.748 21.172 116.568 20.524C112.644 20.668 109.08 20.668 106.92 20.668C105.732 20.668 105.12 20.02 105.12 18.868V17.32C105.12 16.168 105.768 15.52 106.956 15.52C110.196 15.484 112.428 15.448 115.164 15.34C114.984 14.584 114.66 13.432 114.444 12.496C111.456 12.568 109.152 12.604 107.676 12.568C106.488 12.568 105.876 11.92 105.876 10.768V9.364C105.876 8.212 106.524 7.528 107.712 7.564C108.432 7.6 109.08 7.6 109.656 7.6H113.184L112.86 6.412C112.572 5.152 113.184 4.396 114.444 4.396H116.496C117.576 4.396 118.224 4.9 118.404 5.872C118.512 6.304 118.62 6.736 118.728 7.312C121.14 7.204 123.3 6.988 124.812 6.772C126 6.628 126.72 7.204 126.72 8.428V9.904C126.72 11.02 126.144 11.704 125.064 11.848C123.228 12.064 121.536 12.208 120.024 12.244C120.276 13.252 120.564 14.08 120.816 15.088C124.02 14.8 125.892 14.62 127.116 14.476C128.34 14.332 129.024 14.908 129.024 16.132V17.788C129.024 18.904 128.484 19.552 127.368 19.696C125.676 19.912 124.2 20.056 122.256 20.2C122.436 20.776 122.832 22.072 123.228 23.224C123.624 24.484 123.012 25.276 121.716 25.276H119.52ZM107.028 27.184C107.028 25.996 107.244 25.06 107.676 24.124C108.108 23.224 108.828 22.864 109.8 22.864H111.744C113.112 22.864 113.58 23.512 113.076 24.556C112.752 25.204 112.608 25.78 112.608 26.356C112.608 28.156 114.084 28.48 117.072 28.552C119.844 28.624 121.968 28.372 124.56 27.976C125.784 27.796 126.504 28.408 126.504 29.632V31.936C126.504 33.052 126.072 33.7 125.172 33.772C123.156 33.952 120.564 34.204 118.116 34.204C109.872 34.204 107.028 31.504 107.028 27.184Z"
                fill="black"
              />
            </svg>
          </div>

          {/* Desktop navigation */}
          <nav className="hidden md:flex md:grow">
            {/* Desktop sign in links */}
            <ul className="flex grow justify-end flex-wrap items-center">
              <li className="mx-2">サービス</li>
              <li className="mx-2">企業情報</li>
              <li className="mx-2">お問い合わせ</li>
            </ul>
          </nav>

          <MobileMenu />
        </div>
      </div>
    </header>
  );
}
